{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/leonardo.rodrigues/IdeaProjects/IMDB-Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/leonardo.rodrigues/IdeaProjects/IMDB-Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/leonardo.rodrigues/IdeaProjects/IMDB-Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ListaCategorias from'../components/ListaCategorias';import ListaPost from'../components/ListaPost';import'../assets/css/blog.css';import{Route,useParams,useRouteMatch,Link,Switch}from'react-router-dom';import{busca}from'../api/api';import SubCategoria from'./SubCategoria';import axios from'axios';var Categoria=function Categoria(){var _useParams=useParams(),id=_useParams.id;var _useRouteMatch=useRouteMatch(),url=_useRouteMatch.url,path=_useRouteMatch.path;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),subcategorias=_useState2[0],setSubCategorias=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];useEffect(function(){busca(\"movie/category/\".concat(id),function(categoria){setSubCategorias(categoria.subcategorias);});},[id]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://imdb-bonaparte.herokuapp.com/movie/all\");case 3:res=_context.sent;setData(res===null||res===void 0?void 0:res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"titulo-pagina\",children:\"Procura por categoria\"})}),/*#__PURE__*/_jsx(ListaCategorias,{}),/*#__PURE__*/_jsxs(\"ul\",{className:\"lista-categorias container flex\",children:[subcategorias.map(function(subcategoria){return/*#__PURE__*/_jsx(\"li\",{className:\"lista-categorias__categoria lista-categorias__categoria--\".concat(id),children:/*#__PURE__*/_jsx(Link,{to:\"\".concat(url,\"/\").concat(subcategoria),children:subcategoria})},subcategoria);}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"titulo-pagina\",children:[\"filmes de \",id]}),/*#__PURE__*/_jsx(\"section\",{className:\"container flex flex--centro\",children:data.filter(function(post){return post.category===id;}).map(function(post){return/*#__PURE__*/_jsxs(\"article\",{className:\"cartao\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"cartao-post__titulo\",children:[post.title,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsxs(\"h2\",{children:[\"Rating: \",post.rating]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"cartao-post__meta\",children:post.description})]},post.id);})})]})]}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"\".concat(path,\"/\"),children:/*#__PURE__*/_jsx(ListaPost,{url:\"/category/?category=\".concat(id)})}),/*#__PURE__*/_jsx(Route,{path:\"\".concat(path,\"/category/:category\"),children:/*#__PURE__*/_jsx(SubCategoria,{})})]})]});};export default Categoria;","map":{"version":3,"sources":["C:/Users/leonardo.rodrigues/IdeaProjects/IMDB-Front/src/paginas/Categoria.jsx"],"names":["React","useState","useEffect","ListaCategorias","ListaPost","Route","useParams","useRouteMatch","Link","Switch","busca","SubCategoria","axios","Categoria","id","url","path","subcategorias","setSubCategorias","data","setData","categoria","fetchData","get","res","console","log","map","subcategoria","filter","post","category","title","rating","description"],"mappings":"woBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,eAAP,KAA4B,+BAA5B,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAO,wBAAP,CACA,OAASC,KAAT,CAAgBC,SAAhB,CAA2BC,aAA3B,CAA0CC,IAA1C,CAAgDC,MAAhD,KAA8D,kBAA9D,CACA,OAASC,KAAT,KAAsB,YAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,gBACPP,SAAS,EADF,CACdQ,EADc,YACdA,EADc,oBAEAP,aAAa,EAFb,CAEdQ,GAFc,gBAEdA,GAFc,CAETC,IAFS,gBAETA,IAFS,eAGoBf,QAAQ,CAAC,EAAD,CAH5B,wCAGfgB,aAHe,eAGAC,gBAHA,8BAKEjB,QAAQ,CAAC,EAAD,CALV,yCAKfkB,IALe,eAKTC,OALS,eAOtBlB,SAAS,CAAC,UAAM,CACdQ,KAAK,0BAAmBI,EAAnB,EAAyB,SAACO,SAAD,CAAe,CAC3CH,gBAAgB,CAACG,SAAS,CAACJ,aAAX,CAAhB,CACD,CAFI,CAAL,CAGD,CAJQ,CAIN,CAACH,EAAD,CAJM,CAAT,CAMA,GAAMQ,CAAAA,SAAS,0FAAG,iLAEIV,CAAAA,KAAK,CAACW,GAAN,CAChB,gDADgB,CAFJ,QAERC,GAFQ,eAKdJ,OAAO,CAACI,GAAD,SAACA,GAAD,iBAACA,GAAG,CAAEL,IAAN,CAAP,CALc,+EAOdM,OAAO,CAACC,GAAR,cAPc,oEAAH,kBAATJ,CAAAA,SAAS,0CAAf,CAWApB,SAAS,CAAC,UAAM,CACdoB,SAAS,GACV,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,wCACE,YAAK,SAAS,CAAC,WAAf,uBACE,WAAI,SAAS,CAAC,eAAd,mCADF,EADF,cAIE,KAAC,eAAD,IAJF,cAKE,YAAI,SAAS,CAAC,iCAAd,WAEIL,aAAa,CAACU,GAAd,CAAkB,SAACC,YAAD,qBAChB,WACE,SAAS,oEAA8Dd,EAA9D,CADX,uBAIE,KAAC,IAAD,EAAM,EAAE,WAAKC,GAAL,aAAYa,YAAZ,CAAR,UACGA,YADH,EAJF,EAEOA,YAFP,CADgB,EAAlB,CAFJ,cAcE,qCAEE,YAAI,SAAS,CAAC,eAAd,wBAAyCd,EAAzC,GAFF,cAGE,gBAAS,SAAS,CAAC,6BAAnB,UAECK,IAAI,CACHU,MADD,CACQ,SAACC,IAAD,QAAWA,CAAAA,IAAI,CAACC,QAAL,GAAkBjB,EAA7B,EADR,EAECa,GAFD,CAEK,SAACG,IAAD,qBACD,iBAAuB,SAAS,CAAC,QAAjC,wBACG,YAAI,SAAS,CAAC,qBAAd,WACGA,IAAI,CAACE,KADR,kBACe,aADf,kBACyB,aADzB,kBACmC,iCAAaF,IAAI,CAACG,MAAlB,GADnC,GADH,cAIG,UAAG,SAAS,CAAC,mBAAb,UAAkCH,IAAI,CAACI,WAAvC,EAJH,GAAcJ,IAAI,CAAChB,EAAnB,CADC,EAFL,CAFD,EAHF,GAdF,GALF,cAuCE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,WAAKE,IAAL,KAAjB,uBACE,KAAC,SAAD,EAAW,GAAG,+BAAyBF,EAAzB,CAAd,EADF,EADF,cAIE,KAAC,KAAD,EAAO,IAAI,WAAKE,IAAL,uBAAX,uBACE,KAAC,YAAD,IADF,EAJF,GAvCF,GADF,CAkDD,CA9ED,CA+EA,cAAeH,CAAAA,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport ListaCategorias from '../components/ListaCategorias'\r\nimport ListaPost from '../components/ListaPost'\r\nimport '../assets/css/blog.css'\r\nimport { Route, useParams, useRouteMatch, Link, Switch } from 'react-router-dom'\r\nimport { busca } from '../api/api'\r\nimport SubCategoria from './SubCategoria'\r\nimport axios from 'axios'\r\n\r\nconst Categoria = () => {\r\n  const { id } = useParams()\r\n  const { url, path } = useRouteMatch()\r\n  const [subcategorias, setSubCategorias] = useState([])\r\n\r\n  const [data, setData] = useState([]); \r\n\r\n  useEffect(() => {\r\n    busca(`movie/category/${id}`, (categoria) => {\r\n      setSubCategorias(categoria.subcategorias)\r\n    })\r\n  }, [id])\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const res = await axios.get(\r\n        \"https://imdb-bonaparte.herokuapp.com/movie/all\"\r\n      )\r\n      setData(res?.data);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n        <h2 className=\"titulo-pagina\">Procura por categoria</h2>\r\n      </div>\r\n      <ListaCategorias />\r\n      <ul className=\"lista-categorias container flex\">\r\n        {\r\n          subcategorias.map((subcategoria) => (\r\n            <li\r\n              className={`lista-categorias__categoria lista-categorias__categoria--${id}`}\r\n              key={subcategoria}\r\n            >\r\n              <Link to={`${url}/${subcategoria}`}>\r\n                {subcategoria}\r\n              </Link>\r\n            </li>\r\n          ))\r\n        }\r\n\r\n        <span>\r\n          \r\n          <h2 className=\"titulo-pagina\">filmes de {id}</h2>\r\n          <section className=\"container flex flex--centro\">\r\n          { \r\n           data\r\n           .filter((post) => (post.category === id))\r\n           .map((post) => (                 \r\n               <article key={post.id} className=\"cartao\">\r\n                  <h1 className=\"cartao-post__titulo\">\r\n                    {post.title} <br></br> <br></br> <h2>Rating: {post.rating}</h2>\r\n                  </h1>\r\n                  <p className=\"cartao-post__meta\">{post.description}</p>\r\n               </article> \r\n           ))\r\n          }\r\n        </section>\r\n        </span>\r\n\r\n      </ul>\r\n      <Switch>\r\n        <Route exact path={`${path}/`}>\r\n          <ListaPost url={`/category/?category=${id}`} />\r\n        </Route>\r\n        <Route path={`${path}/category/:category`}>\r\n          <SubCategoria />\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  )\r\n}\r\nexport default Categoria\r\n"]},"metadata":{},"sourceType":"module"}